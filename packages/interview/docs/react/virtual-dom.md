# 虚拟DOM及diff算法

虚拟 DOM (Virtual DOM) 是一种编程概念，其中 UI 的表示是由虚拟节点或虚拟节点树表示的，而不是直接映射到实际的 DOM。它充当了真实 DOM 和应用状态之间的中介。虚拟 DOM 提供了一种能够在不直接操作 DOM 的情况下更新视图的机制。主要的目标是通过避免直接的 DOM 操作来提高应用的性能，因为直接的 DOM 操作通常比纯 JavaScript 和虚拟 DOM 操作要慢得多。


## 虚拟DOM 如何工作

1. **UI 表示**：应用的 UI 被表示为虚拟 DOM 树的结构。

2. **修改**：当应用的状态变化时，会生成一个新的虚拟 DOM 树。

3. **对比**：新的虚拟 DOM 树与前一个树进行对比，使用一个叫做 "diffing" 的过程。这个过程会确定两棵树之间的具体差异。

4. **更新**：一旦知道了差异，就会更新真实的 DOM 来匹配新的虚拟 DOM 树，但只会更新发生变化的部分，而不是重新渲染整个 UI。这种更新方式被称为 "patching"。

这种机制能够帮助提高性能的主要原因：

1. **减少实际 DOM 操作**：直接操作 DOM 通常是缓慢的，尤其是大量的读/写操作时。虚拟 DOM 机制限制了这些操作的数量。

2. **批量和延迟的更新**：多个修改可以在虚拟 DOM 中累积，然后一次性更新真实 DOM，而不是为每个小的改变都触发更新。

3. **更少的重绘和重流**：浏览器的渲染引擎会尝试优化渲染过程，但频繁的 DOM 更新可能会导致不必要的重绘和重流。通过限制 DOM 更新的数量，虚拟 DOM 可以帮助减少这些操作，从而提高性能。

4. **JS 的速度优势**：虚拟 DOM 的 diffing 和 patching 过程完全在 JavaScript 中进行，而 JavaScript 通常比 DOM 操作更快。

虚拟 DOM 不仅仅存在于 React 中（尽管 React 可能是最知名的库，使用了虚拟 DOM），还有其他许多前端库和框架也实现了自己的虚拟 DOM 或类似的概念。

## 有了虚拟DOM，性能就一定能够得到提升吗？

## React的diff算法与传统的diff算法有什么区别？

## diff策略有哪些？它们是如何比较的？


