
# preload 和 prefetch

`preload` 和 `prefetch` 都是现代浏览器提供的资源提示功能，它们可以帮助开发者控制资源的加载时机，优化页面的加载速度和性能。但它们之间有一些关键的区别，并且各自适用于不同的使用场景。下面我们来探讨它们的区别和各自的使用场景：

### 1. preload

#### 定义：
- `preload` 是一种告诉浏览器你页面上即将需要的资源，因此浏览器应该尽快开始加载它的方式。

#### 使用场景：
- **关键资源**：当你知道某些资源（如关键的CSS或JavaScript文件）在页面加载后会立即需要时，可以使用 `preload`。
- **不在DOM的资源**：对于默认不被解析的、但即将被用到的资源，例如通过 JavaScript 动态添加到页面的字体文件。
- **按需加载的模块**：如果你正在使用模块化的JavaScript，并且知道在主模块加载后会立即请求另一个模块，那么可以提前加载该模块。

#### 语法：
```html
<link rel="preload" as="script" href="myscript.js">
```

### 2. prefetch

#### 定义：
- `prefetch` 是一种告诉浏览器，某资源在未来可能会被用到，所以当浏览器空闲时，可以提前加载它的方式。

#### 使用场景：
- **未来的导航**：当你预计用户可能会点击某个链接并导航到另一个页面时，可以预先获取那个页面的资源。例如，如果用户在主页上，并且经常点击“关于”链接，那么你可以预先获取“关于”页面的资源。
- **预测用户行为**：根据用户的行为或其他数据分析预测，提前加载可能会在未来被用户请求的资源。

#### 语法：
```html
<link rel="prefetch" href="nextpage.html">
```

### 主要区别：

1. **优先级**：`preload` 的优先级高于 `prefetch`。因为 `preload` 的资源被视为当前页面的关键资源，而 `prefetch` 的资源被视为低优先级资源，仅在浏览器空闲时加载。
  
2. **使用意图**：`preload` 用于加载当前页面上即将需要的资源；而 `prefetch` 用于加载用户在不久的将来可能需要的资源。

3. **浏览器支持**：尽管现代浏览器大都支持这两个功能，但它们的支持度可能会有所不同。建议在使用前检查特定浏览器的支持度。

总结，`preload` 和 `prefetch` 都是优化资源加载的强大工具，但关键在于理解和识别最适合你的使用场景的那一个，并据此做出决策。